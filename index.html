<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tap2Rich - Space Style</title>

    <script src="https://richinfo.co/richpartners/telegram/js/tg-ob.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <script>
        // 1. Initialization
        window.TelegramAdsController = new TelegramAdsController();
        window.TelegramAdsController.initialize({
            pubId: "991750",
            appId: "5124",
        });

        // ✅ Function jo bina button ke ad dikhayega
        function triggerSpaceAd() {
            window.TelegramAdsController.show()
            .then(() => console.log("Ad Displayed"))
            .catch((err) => console.log("Ad not ready or No-Fill"));
        }

        // 2. App open hote hi ad dikhao (3 second delay taaki game load ho jaye)
        setTimeout(triggerSpaceAd, 3000);
    </script>

    <style>
        body { margin: 0; background: #000; color: #fff; font-family: sans-serif; text-align: center; overflow: hidden; }
        #header { padding: 20px; background: #111; border-bottom: 2px solid #0ff; display: flex; justify-content: space-around; font-weight: bold; }
        #game { margin-top: 100px; }
        #tapObject { 
            width: 250px; height: 250px; margin: 0 auto; 
            background: radial-gradient(circle, #0ff, #000); 
            border-radius: 50%; border: 5px solid #0ff;
            display: flex; align-items: center; justify-content: center;
            font-size: 40px; box-shadow: 0 0 30px #0ff; cursor: pointer;
        }
        #tapObject:active { transform: scale(0.95); }
    </style>
</head>
<body>

    <div id="header">
        <span>POINTS: <span id="score">0</span></span>
        <span>ADS MODE: AUTO</span>
    </div>

    <div id="game">
        <div id="tapObject" onclick="handleUserTap()">TAP!</div>
        <p>Taps until next ad: <span id="count">4</span></p>
    </div>

    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        let score = 0;
        let clickTracker = 0; // Space Adventure jaisa counter

        function handleUserTap() {
            score++;
            clickTracker++;
            
            document.getElementById("score").innerText = score;
            document.getElementById("count").innerText = (4 - clickTracker);

            // ✅ Space Adventure Logic: Har 4 clicks par auto ad trigger
            if (clickTracker >= 4) {
                clickTracker = 0; // Counter reset
                triggerSpaceAd(); // Bina puche ad show karo
                document.getElementById("count").innerText = "4";
            }

            Telegram.WebApp.HapticFeedback.impactOccurred("medium");
        }

        // Har 2 minute mein ek compulsory ad (Back-up)
        setInterval(triggerSpaceAd, 120000);
    </script>
</body>
</html>

